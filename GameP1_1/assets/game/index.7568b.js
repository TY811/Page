window.__require=function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({Activity:[function(t,e,n){"use strict";cc._RF.push(e,"5c67578htBHSo049DTHsNUD","Activity");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framework/AudioMgr"),c=t("../../framework/Constant"),s=t("../../framework/Platform"),l=t("../../framework/Popup"),u=t("../../framework/RecycleScroll"),p=t("../../framework/Report"),f=t("../../framework/Tips"),d=t("../../framework/User"),h=cc._decorator,m=h.ccclass,v=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.content=null,e.nav=null,e.scrollView=null,e.frames=[],e.btnBack=null,e._scroll=null,e._arr=null,e._configlist=null,e}return i(e,t),e.prototype.onEnable=function(){this.initNodes(),this.initEvents(),this.initData(),this.initView(),this.mask.opacity=0,cc.tween(this.mask).to(.25,{opacity:200}).start(),this.content.scale=0,cc.tween(this.content).to(.3,{scale:1},{easing:"backOut"}).start()},e.prototype.onDisable=function(){},e.prototype.initNodes=function(){this.mask=cc.find("Mask",this.node),this.content=cc.find("Content",this.node),this.scrollView=cc.find("ScrollView",this.content),this.btnBack=cc.find("Close",this.content)},e.prototype.initEvents=function(){this.btnBack.on(cc.Node.EventType.TOUCH_END,this.clickCloseHandle,this)},e.prototype.initData=function(){this._scroll=this.scrollView.getComponent(u.default)},e.prototype.initView=function(){this.createList([{name:"\u5fa1\u5251\u5c60\u9f99",levelUid:-29650},{name:"\u575a\u5b88\u5821\u5792",levelUid:-30113},{name:"\u51fb\u9000\u77f3\u9f99",levelUid:-29983},{name:"\u9ed1\u6d1e\u8fdb\u7403",levelUid:-30920},{name:"\u6d88\u706d\u6076\u9f99",levelUid:-29250},{name:"\u62ef\u6551\u5c0f\u5b69",levelUid:-25890},{name:"\u8fde\u8fde\u770b",levelUid:-29591},{name:"\u524a\u6c34\u679c\u76ae",levelUid:-30453},{name:"\u6574\u7406\u94a5\u5319",levelUid:-28763},{name:"\u54ea\u5412\u706d\u9f99",levelUid:-30312},{name:"\u9ebb\u5c06\u6d88\u9664",levelUid:-29534},{name:"\u516d\u89d2\u4e58\u5ba2\u4e0a\u8f66",levelUid:-28899},{name:"\u62ef\u6551\u6751\u6c11",levelUid:-29061},{name:"\u963b\u6b62\u5973\u5b69\u56de\u5bb6",levelUid:-29947},{name:"\u6574\u7406\u9ebb\u5c06",levelUid:-29962}])},e.prototype.createList=function(t){this._arr=t,this._scroll.onItemRender=this.onItemRender.bind(this),this._scroll.onItemClicked=this.onItemClicked.bind(this),this._scroll.numItems=t.length},e.prototype.onItemRender=function(t,e){var n=this._arr[t];e.getComponent(y)||e.addComponent(y),e.getComponent(y).init(n)},e.prototype.onItemClicked=function(){},e.prototype.clickCloseHandle=function(){a.audioMgr.playSound(c.SoundName.CLICK),l.popup.hide()},r([m],e)}(cc.Component));n.default=v;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spPicture=null,e.lbName=null,e.btnPlay=null,e.btnUnlock=null,e._init=!1,e._unlock=!1,e._data=null,e}return i(e,t),e.prototype.init=function(t){this._init||(this._init=!0,this.initNodes(),this.initEvents()),this.lbName.string=""+t.name,this._data=t},e.prototype.initNodes=function(){this.lbName=cc.find("Name",this.node).getComponent(cc.Label)},e.prototype.initEvents=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.clickPlayHandle,this)},e.prototype.clickPlayHandle=function(){a.audioMgr.playSound(c.SoundName.CLICK),l.popup.hideAll(),cc.game.emit(c.EventName.SHOW_LEVEL,{type:c.LevelModelType.Other,levelUid:this._data.levelUid})},e.prototype.clickUnlockHandle=function(){var t=this;a.audioMgr.playSound(c.SoundName.CLICK),s.platform.showRewardAds(function(e){if(0==e){var n=d.user.get("activity");n.push({id:t._data.id}),d.user.set("activity",n),l.popup.hideAll(),cc.game.emit(c.EventName.SHOW_LEVEL),p.report.reportTree("reward_btn",{scence:"other"})}else-3==e?f.tips.show("\u6682\u65e0\u5e7f\u544a\uff0c\u656c\u8bf7\u671f\u5f85!"):-4==e&&f.tips.show("\u6682\u65e0\u5e7f\u544a\uff0c\u7a0d\u540e\u518d\u8bd5!")})},e}(cc.Component);cc._RF.pop()},{"../../framework/AudioMgr":void 0,"../../framework/Constant":void 0,"../../framework/Platform":void 0,"../../framework/Popup":void 0,"../../framework/RecycleScroll":void 0,"../../framework/Report":void 0,"../../framework/Tips":void 0,"../../framework/User":void 0}],CollectItem:[function(t,e,n){"use strict";cc._RF.push(e,"d9209nkOVtOsoSLet3E3W/I","CollectItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framework/AudioMgr"),c=t("../../framework/Constant"),s=t("../../framework/UIBase"),l=t("../../framework/User"),u=cc._decorator,p=u.ccclass,f=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.picture=null,e.spriteOrder=null,e.order=null,e.pictureLock=null,e.btnUse=null,e.btnUsed=null,e.btnLock=null,e._order=0,e._data=null,e._unlock=!1,e._frames=[],e}return i(e,t),e.prototype.init=function(t,e,n){this.unbindTouchEndEvents(this.btnUse),this.bindTouchEndEvents(this.btnUse,this.clickUseHandle),this._data=t,this._order=e,this._frames=n,this.refresh()},e.prototype.refresh=function(){var t=this,e=(l.user.get(c.LevelModelType.MainLevel).curLevelId||1)-1;this.btnUse.active=!1,this.btnUsed.active=!1,this.btnLock.active=!1,this.order.getComponent(cc.Label).string="No."+this._data.id,e>=this._data.id?(this.spriteOrder.getComponent(cc.Sprite).spriteFrame=this._frames[0],this.pictureLock.active=!1,cc.assetManager.loadBundle("resBundle",function(e,n){e||n.load("texture/collect/"+t._data.uId,function(e,n){!e&&cc.isValid(t.picture)&&(t.picture.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),t.picture.active=!0)})})):(this.picture.active=!1,this.pictureLock.active=!0,this.spriteOrder.getComponent(cc.Sprite).spriteFrame=this._frames[1])},e.prototype.clickUseHandle=function(){a.audioMgr.playSound(c.SoundName.CLICK);var t=l.user.get("levels");t.u=this._order,l.user.set("levels",t),cc.game.emit(c.EventName.REFRESH_COLLECT_USE,this._order)},r([p],e)}(s.default));n.default=f,cc._RF.pop()},{"../../framework/AudioMgr":void 0,"../../framework/Constant":void 0,"../../framework/UIBase":void 0,"../../framework/User":void 0}],Collect:[function(t,e,n){"use strict";cc._RF.push(e,"e6b95mGWKZGGKb6c2gmkRXX","Collect");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framework/AudioMgr"),l=t("../../framework/Bms"),u=t("../../framework/Config"),p=t("../../framework/Constant"),f=t("../../framework/Popup"),d=t("../../framework/RecycleScroll"),h=t("../../framework/UIBase"),m=t("../../framework/User"),v=cc._decorator,y=v.ccclass,w=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.content=null,e.scrollView=null,e.frames=null,e.list=null,e.item=null,e.collectProgress=null,e.btnClose=null,e._data=null,e._frames=[],e._scroll=null,e._ranks=null,e._arr=[],e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initNodes(),this.initEvents(),this.initView(),this.showContentAnim(),this.item.active=!1},e.prototype.initNodes=function(){this._frames=this.frames.children.map(function(t){return t.getComponent(cc.Sprite).spriteFrame}),this._scroll=this.scrollView.getComponent(d.default)},e.prototype.initEvents=function(){this.bindTouchEndEvents(this.btnClose,this.clickCloseHandle),cc.game.on(p.EventName.REFRESH_COLLECT_USE,this.refreshView,this)},e.prototype.initView=function(){return a(this,void 0,void 0,function(){var t,e,n,o,i;return c(this,function(r){switch(r.label){case 0:return[4,u.config.get(p.ConfigName.MainLevel)];case 1:if(t=r.sent(),t=Object.values(t).sort(function(t,e){return Number(t)-Number(e)}),(e=l.bms.getKey("level"))&&e.length>0)for(n=0;n<e.length;n++)o=e[n],t[n].uId=o;return i=(m.user.get(p.LevelModelType.MainLevel).curLevelId||1)-1,this.createList(t),this.collectProgress.getComponent(cc.Label).string=window.language.formatStr("\u6536\u96c6\u8fdb\u5ea6\uff1a%d/%d",i,t.length),[2]}})})},e.prototype.refreshView=function(){this._scroll.getContent().children.forEach(function(t){t.active&&t.getComponent("CollectItem").refresh()})},e.prototype.showContentAnim=function(){var t=this;return new Promise(function(e){t.mask.opacity=0,cc.tween(t.mask).to(.25,{opacity:200}).start(),t.content.scale=0,cc.tween(t.content).to(.3,{scale:1},{easing:"backOut"}).call(function(){e()}).start()})},e.prototype.hideContentAnim=function(){var t=this;return new Promise(function(e){cc.tween(t.mask).to(.25,{opacity:0}).start(),cc.tween(t.content).to(.3,{scale:0},{easing:"backIn"}).call(function(){e()}).start()})},e.prototype.createList=function(t){this._arr=t,this._scroll.onItemRender=this.onItemRender.bind(this),this._scroll.onItemClicked=this.onItemClicked.bind(this),this._scroll.numItems=t.length},e.prototype.onItemRender=function(t,e){e.getComponent("CollectItem").init(this._arr[t],t,this._frames)},e.prototype.onItemClicked=function(){},e.prototype.clickCloseHandle=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return s.audioMgr.playSound(p.SoundName.CLICK),[4,this.hideContentAnim()];case 1:return t.sent(),f.popup.hide(),[2]}})})},r([y],e)}(h.default));n.default=w,cc._RF.pop()},{"../../framework/AudioMgr":void 0,"../../framework/Bms":void 0,"../../framework/Config":void 0,"../../framework/Constant":void 0,"../../framework/Popup":void 0,"../../framework/RecycleScroll":void 0,"../../framework/UIBase":void 0,"../../framework/User":void 0}],Fail:[function(t,e,n){"use strict";cc._RF.push(e,"be1908TxxZMVbc/Mt58Z6H+","Fail");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framework/AudioMgr"),l=t("../../framework/Bms"),u=t("../../framework/Constant"),p=t("../../framework/Platform"),f=t("../../framework/Popup"),d=t("../../framework/UIBase"),h=t("../../framework/User"),m=cc._decorator,v=m.ccclass,y=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.content=null,e.picture=null,e.pictureBorder=null,e.pictureMask=null,e.progressText=null,e.progress=null,e.failDes=null,e.titleBackground=null,e.title=null,e.picturePanel=null,e.progressBackground=null,e.btnHome=null,e.btnAgain=null,e._data=null,e}return i(e,t),e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return t.prototype.onLoad.call(this),this.initEvents(),this.initView(),[4,this.showContentAnim()];case 1:return e.sent(),this.initProgress(),[2]}})})},e.prototype.initEvents=function(){this.bindTouchEndEvents(this.btnHome,this.clickHomeHandle),this.bindTouchEndEvents(this.btnAgain,this.clickAgainHandle)},e.prototype.initView=function(){if(this.checkInsertHandle(null),this._data.levelType==u.LevelModelType.MainLevel){if(this._data&&this._data.drawData){var t=this._data.drawData;this.pictureBorder.setContentSize(t.size),this.pictureMask.setContentSize(t.size.width+2,t.size.height+2),this.picture.getComponent(cc.Sprite).spriteFrame=t.frame;var e=["\u80dc\u5229\u5728\u671b\uff0c\u518d\u8bd5\u4e00\u6b21\u5427","\u8fd8\u5dee\u4e00\u70b9\u70b9\uff0c\u4e0b\u6b21\u5fc5\u62ff\u4e0b"];this.failDes.getComponent(cc.Label).string=""+e[Math.floor(e.length*Math.random())]}}else this.picturePanel.active=!1,this.progress.active=!1},e.prototype.initProgress=function(){if(this._data&&this._data.progress){var t=Number(this._data.progress.toFixed(2)),e=0,n=t/10,o=this.progress.getComponent(cc.Sprite),i=this.progressText.getComponent(cc.Label);this.schedule(function(){e+=n,i.string=Number((100*e).toFixed(0))+"%",o.fillRange=e},.05,9)}},e.prototype.showContentAnim=function(){var t=this;return new Promise(function(e){t.titleBackground.opacity=0,cc.tween(t.titleBackground).to(.2,{opacity:255}).start(),t.title.opacity=0,cc.tween(t.title).to(.2,{opacity:255}).start(),t.picturePanel.opacity=0,cc.tween(t.picturePanel).delay(.15).to(.2,{opacity:255}).start(),t.pictureMask.opacity=0,cc.tween(t.pictureMask).delay(.15).to(.2,{opacity:255}).start(),t.progressBackground.opacity=0,cc.tween(t.progressBackground).delay(.35).to(.2,{opacity:255}).start(),t.progress.opacity=0,cc.tween(t.progress).delay(.35).to(.2,{opacity:255}).start(),t.btnAgain.opacity=0,cc.tween(t.btnAgain).delay(.55).to(.2,{opacity:255}).start(),t.btnHome.opacity=0,cc.tween(t.btnHome).delay(.55).to(.2,{opacity:255}).call(function(){e()}).start()})},e.prototype.hideContentAnim=function(){return new Promise(function(t){t()})},e.prototype.clickHomeHandle=function(){return a(this,void 0,void 0,function(){return c(this,function(){return s.audioMgr.playSound(u.SoundName.CLICK),f.popup.hide(),cc.game.emit(u.EventName.SHOW_MAIN),[2]})})},e.prototype.clickAgainHandle=function(){return a(this,void 0,void 0,function(){return c(this,function(){return s.audioMgr.playSound(u.SoundName.CLICK),f.popup.hide(),cc.game.emit(u.EventName.GAME_REPLAY),[2]})})},e.prototype.checkInsertHandle=function(t){if(p.platform.not(u.PLATFORM.ZJTD_MINIGAME))return t&&t();var e=Number(this._data.curLevelId)-1,n=[l.bms.getKey("startWinFullScreenAd"),l.bms.getKey("spaceWinFullScreenAd")];if(l.bms.checkKey("fullScreenAd")){var o=Math.floor((new Date).getTime()/1e3),i=h.user.getTempData("lastInsertTime")||h.user.getTempData("startTime");if(Math.floor((new Date).getTime()/1e3)-i>=l.bms.getKey("FullScreenAdCD")&&0!=n[0]&&0!=n[1]&&(e==n[0]||e>=n[0]&&e%n[1]==0))return h.user.setTempData("lastInsertTime",o),void p.platform.showInsert(function(){t&&t()})}return t&&t()},r([v],e)}(d.default));n.default=y,cc._RF.pop()},{"../../framework/AudioMgr":void 0,"../../framework/Bms":void 0,"../../framework/Constant":void 0,"../../framework/Platform":void 0,"../../framework/Popup":void 0,"../../framework/UIBase":void 0,"../../framework/User":void 0}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"a8ddaTKqFlEsryYh+G2L91R","Game");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framework/AudioMgr"),l=t("../../framework/Bms"),u=t("../../framework/Constant"),p=t("../../framework/Platform"),f=t("../../framework/Report"),d=t("../../framework/User"),h=t("../loading/script/Loading"),m=cc._decorator,v=m.ccclass,y=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.container=null,e.loadingstartTimeStamp=0,e.loadingStayDuration=1e3,e}return i(e,t),e.prototype.onLoad=function(){this.initNodes(),this.initData(),this.initEvents()},e.prototype.initNodes=function(){this.container=cc.find("Canvas/Container")},e.prototype.initEvents=function(){cc.game.on(u.EventName.SHOW_LEVEL,this.showLevel,this),cc.game.on(u.EventName.SHOW_MAIN,this.showMain,this)},e.prototype.initData=function(){var t=this;d.user.get("loginTime")||(d.user.set("loginTime",Math.floor((new Date).getTime()/1e3)),d.user.setTempData("isFirst",!0),d.user.set("isFirst",!0));var e=d.user.get("loginDate");if(e)if(e!=(new Date).getMonth()+"-"+(new Date).getDate()){d.user.setTempData("isNewDay",!0),d.user.set("isFirst",!1),d.user.set("loginDate",(new Date).getMonth()+"-"+(new Date).getDate());var n=d.user.get("limitedRewardData");n&&(n.isGet=!1,n.todayIsTip=!1,d.user.set("limitedRewardData",n))}else d.user.setTempData("isNewDay",!1);else d.user.setTempData("isNewDay",!0),d.user.set("loginDate",(new Date).getMonth()+"-"+(new Date).getDate());var o=d.user.get("setting");(o.music?function(){s.audioMgr.setBgmMute(!1)}:function(){s.audioMgr.setBgmMute(!0)})(),(o.sound?function(){s.audioMgr.setSoundMute(!1)}:function(){s.audioMgr.setSoundMute(!0)})(),p.platform.is(u.PLATFORM.ZJTD_MINIGAME)&&p.platform.getInstance().onShow(function(){(d.user.get("setting").music?function(){s.audioMgr.setBgmMute(!1)}:function(){s.audioMgr.setBgmMute(!0)})()}),d.user.setTempData("startTime",Math.floor((new Date).getTime())/1e3),d.user.set("playTime",(d.user.get("playTime")||0)+1),f.report.reportTree("user_Login",{IsNew:d.user.getTempData("isFirst")||!1,OpenNum:d.user.get("playTime"),PlayDays:Math.floor((Math.floor((new Date).getTime()/1e3)-d.user.get("loginTime"))/86400)+1}),console.error("platform.getConfig().app_name:",p.platform.getConfig().app_name,p.platform.getConfig().version),l.bms.init(p.platform.getConfig().app_name,p.platform.getConfig().version,function(){var e=(new Date).getTime()-t.loadingstartTimeStamp,n=e>t.loadingStayDuration?0:(t.loadingStayDuration-e)/1e3;t.node.removeComponent(h.default),t.scheduleOnce(function(){t.showMain()},n)})},e.prototype.showLevel=function(t){return void 0===t&&(t=null),a(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.addContentToContainer("Level",t)];case 1:return e.sent(),[2]}})})},e.prototype.showMain=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:t=["Main"],this.hideAll(0),e.label=1;case 1:return t.length?[4,this.addContentToContainer(t.shift())]:[3,3];case 2:return e.sent(),[3,1];case 3:return[2]}})})},e.prototype.hideAll=function(t){for(;this.container.childrenCount!=t;){var e=this.container.children[0];e&&(e.removeFromParent(),e.destroy())}},e.prototype.addContentToContainer=function(t,e){var n=this;return void 0===e&&(e=null),new Promise(function(o){cc.assetManager.loadBundle("resBundle",function(i,r){r.load("prefab/UIModule/"+t,function(i,r){if(i)return n.addContentToContainer(t,e);var a=cc.instantiate(r),c=a._components[0];return console.log(c),e&&c&&(c._data=e),n.container.addChild(a),o()})})})},r([v],e)}(cc.Component));n.default=y,cc._RF.pop()},{"../../framework/AudioMgr":void 0,"../../framework/Bms":void 0,"../../framework/Constant":void 0,"../../framework/Platform":void 0,"../../framework/Report":void 0,"../../framework/User":void 0,"../loading/script/Loading":void 0}],Gift:[function(t,e,n){"use strict";cc._RF.push(e,"c1e056Y0ZdFTIuTAWJ+OkNh","Gift");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framework/AudioMgr"),l=t("../../framework/Constant"),u=t("../../framework/Platform"),p=t("../../framework/Popup"),f=t("../../framework/Tips"),d=t("../../framework/UIBase"),h=t("../../framework/User"),m=cc._decorator,v=m.ccclass,y=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.content=null,e.frames=null,e.rewardIcon=null,e.btnGet=null,e.btnGo=null,e.btnClose=null,e.btnGiveUp=null,e._data=null,e._frames=[],e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initNodes(),this.initEvents(),this.initView(),this.showContentAnim(),u.platform.getInstance().onShow(this.checkHandle)},e.prototype.onDisable=function(){u.platform.getInstance().offShow(this.checkHandle)},e.prototype.initNodes=function(){this._frames=this.frames.children.map(function(t){return t.getComponent(cc.Sprite).spriteFrame})},e.prototype.initEvents=function(){this.bindTouchEndEvents(this.btnClose,this.clickCloseHandle),this.bindTouchEndEvents(this.btnGo,this.clickGoHandle),this.bindTouchEndEvents(this.btnGet,this.clickGetHandle),this.bindTouchEndEvents(this.btnGiveUp,this.clickCloseHandle)},e.prototype.initView=function(){if(h.user.get("limitedRewardData")||h.user.set("limitedRewardData",{}),u.platform.is(l.PLATFORM.ZJTD_MINIGAME)){var t=h.user.get("limitedRewardData");if(t.isGet)return void(this.btnGet.getChildByName("Text").getComponent(cc.Label).string="\u5df2\u9886\u53d6");var e=u.platform.getInstance()&&u.platform.getInstance().getLaunchOptionsSync();switch(e&&e.scene?"021001"==e.scene||"101001"==e.scene||"021036"==e.scene?(this.btnGo.active=!1,this.btnGet.active=!0,this.btnGiveUp.active=!1):(this.btnGo.active=!0,this.btnGet.active=!1,this.btnGiveUp.active=!0,["Douyin"].some(function(t){return t==u.platform.getInstance().getSystemInfoSync().appName})&&window.tt.checkScene?this.btnGo.getChildByName("Text").getComponent(cc.Label).string="\u53bb\u4fa7\u8fb9\u680f":this.btnGo.getChildByName("Text").getComponent(cc.Label).string="\u4e86 \u89e3"):(this.btnGo.active=!0,this.btnGo.getChildByName("Text").getComponent(cc.Label).string="\u4e86 \u89e3"),t.todayType){case"slotItem":case"TODO":this.rewardIcon.getComponent(cc.Sprite).spriteFrame=this._frames[0]}}},e.prototype.showContentAnim=function(){var t=this;return new Promise(function(e){t.mask.opacity=0,cc.tween(t.mask).to(.25,{opacity:200}).start(),t.content.scale=0,cc.tween(t.content).to(.3,{scale:1},{easing:"backOut"}).call(function(){e()}).start()})},e.prototype.hideContentAnim=function(){var t=this;return new Promise(function(e){cc.tween(t.mask).to(.25,{opacity:0}).start(),cc.tween(t.content).to(.3,{scale:0},{easing:"backIn"}).call(function(){e()}).start()})},e.prototype.checkHandle=function(t){if(h.user.get("limitedRewardData").isGet)return this.btnGet.getChildByName("Text").getComponent(cc.Label).string="\u5df2\u9886\u53d6",this.btnGet.active=!0,this.btnGo.active=!1,void(this.btnGiveUp.active=!1);t&&t.location&&"sidebar_card"==t.location&&(this.btnGet.active=!0,this.btnGo.active=!1,this.btnGiveUp.active=!1),"021001"!=t.scene&&"101001"!=t.scene&&"021036"!=t.scene||(this.btnGet.active=!0,this.btnGo.active=!1,this.btnGiveUp.active=!1)},e.prototype.clickGetHandle=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:switch(s.audioMgr.playSound(l.SoundName.CLICK),(t=h.user.get("limitedRewardData")||{}).todayType="slotItem",t.todayType){case"slotItem":t.slotItem||(t.slotItem=0),t.slotItem++}return t.isGet=!0,h.user.set("limitedRewardData",t),f.tips.show("\u5956\u52b1\u5df2\u53d1\u653e",1),[4,this.hideContentAnim()];case 1:return e.sent(),p.popup.hide(),this._data&&this._data.cb(),cc.game.emit(l.EventName.REFRESH_MAIN_VIEW),[2]}})})},e.prototype.clickGoHandle=function(){var t=this;s.audioMgr.playSound(l.SoundName.CLICK),u.platform.getInstance().checkScene?u.platform.getInstance().checkScene({scene:"sidebar",success:function(e){console.log("check scene success: ",e.isExist),e.isExist?u.platform.getInstance().navigateToScene({scene:"sidebar",success:function(){console.log("navigate to scene success"),t.btnGet.active=!0,t.btnGiveUp.active=!1},fail:function(t){console.log("navigate to scene fail: ",t)}}):f.tips.show("\u8bf7\u4ece\u4fa7\u8fb9\u680f\u8fdb\u5165\u6e38\u620f")},fail:function(t){console.log("check scene fail:",t),f.tips.show("\u8bf7\u4ece\u4fa7\u8fb9\u680f\u8fdb\u5165\u6e38\u620f")}}):f.tips.show("\u6309\u7167\u4e0a\u65b9\u6307\u5f15\u4ece\u4fa7\u8fb9\u680f\u91cd\u65b0\u8fdb\u5165\u5373\u53ef\u9886\u53d6\u5956\u52b1",1)},e.prototype.clickCloseHandle=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return s.audioMgr.playSound(l.SoundName.CLICK),[4,this.hideContentAnim()];case 1:return t.sent(),p.popup.hide(),this._data&&this._data.cb(),cc.game.emit(l.EventName.REFRESH_MAIN_VIEW),[2]}})})},r([v],e)}(d.default));n.default=y,cc._RF.pop()},{"../../framework/AudioMgr":void 0,"../../framework/Constant":void 0,"../../framework/Platform":void 0,"../../framework/Popup":void 0,"../../framework/Tips":void 0,"../../framework/UIBase":void 0,"../../framework/User":void 0}],Level:[function(t,e,n){"use strict";cc._RF.push(e,"5be13I0YuRLF72Uv2q4IFs3","Level");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framework/AssetManager"),l=t("../../framework/AudioMgr"),u=t("../../framework/Bms"),p=t("../../framework/Config"),f=t("../../framework/Constant"),d=t("../../framework/Platform"),h=t("../../framework/Popup"),m=t("../../framework/Report"),v=t("../../framework/Tips"),y=t("../../framework/User"),w=t("../../zqddn_zhb/script/common/LevelUtils"),g=cc._decorator,_=g.ccclass,b=g.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editorJump=null,e.editorJumpDev=null,e.editorJumpOther=null,e.bottomBtn=null,e.buttonTemp=null,e.levelIdTxt=null,e.devId=null,e.gm=null,e.version=null,e.content=null,e._data=null,e.levelType=null,e.curLevelId=null,e.curLevelUid=null,e.levelCfg=null,e.levelComp=null,e.runTime=0,e.isFirstReport=!1,e.clickGmCnt=0,e.gmCd=0,e.isCanOpenGm=!1,e}return i(e,t),e.prototype.onLoad=function(){this.gm.active=!1,this.bottomBtn.active=!1,this.levelIdTxt.string="",this.version.string="v"+d.platform.getConfig().version,window.isLoopMove=u.bms.getKey("lift")},e.prototype.onEnable=function(){var t=this;this.buttonTemp.active=!1,this.initNodes(),this.initEvents(),this.initData(function(){t.initView(),t.runLevel()})},e.prototype.clickGm=function(){this.clickGmCnt++,this.clickGmCnt>5&&(this.isCanOpenGm=!0),u.bms.checkKey("GM")&&this.isCanOpenGm&&(this.gm.active=!this.gm.active)},e.prototype.onDisable=function(){this.clearEvents()},e.prototype.initNodes=function(){this.content=cc.find("Content",this.node)},e.prototype.initEvents=function(){cc.game.on(f.EventName.GAME_FAIL,this.fail,this),cc.game.on(f.EventName.GAME_SUC,this.success,this),cc.game.on(f.EventName.GAME_NEXT,this.nextLevel,this),cc.game.on(f.EventName.GAME_REPLAY,this.clickReplay,this),cc.game.on(f.EventName.GAME_OPENSLOT,this.mainOpenSlot,this),cc.game.on(f.EventName.REPORT_LEVEL_RETURN,this.report_Level_Return,this)},e.prototype.clearEvents=function(){cc.game.off(f.EventName.GAME_FAIL,this.fail,this),cc.game.off(f.EventName.GAME_SUC,this.success,this),cc.game.off(f.EventName.GAME_NEXT,this.nextLevel,this),cc.game.off(f.EventName.GAME_REPLAY,this.clickReplay,this),cc.game.off(f.EventName.GAME_OPENSLOT,this.mainOpenSlot,this),cc.game.off(f.EventName.REPORT_LEVEL_RETURN,this.report_Level_Return,this)},e.prototype.initData=function(t){return a(this,void 0,void 0,function(){var e,n;return c(this,function(o){switch(o.label){case 0:switch(this.levelType=this._data.type,e=y.user.get(this.levelType),this.curLevelId=e&&e.curLevelId?e.curLevelId:1,this.levelType){case f.LevelModelType.MainLevel:return[3,1]}return[3,3];case 1:return n=this,[4,p.config.get(f.ConfigName.MainLevel)];case 2:return n.levelCfg=o.sent(),[3,3];case 3:return e||this.levelType==f.LevelModelType.MainLevel&&y.user.set(this.levelType,{curLevelId:this.curLevelId}),t&&t(),[2]}})})},e.prototype.initView=function(){var t=this,e=f.LevelModelItem[this.levelType];e&&e.length&&e.forEach(function(e){return a(t,void 0,void 0,function(){var t,n;return c(this,function(o){switch(o.label){case 0:return t=cc.instantiate(this.buttonTemp),this.bottomBtn.addChild(t),t.name=""+e.funName,t.on(cc.Node.EventType.TOUCH_END,this["click_"+e.funName].bind(this),this),t.getChildByName("txt").getComponent(cc.Label).string=e.name,t.getChildByName("cntBg").active=!1,t.getChildByName("adIcon").active=!0,[4,s.default.getRes("resBundle","texture/icon/"+e.icon,cc.Texture2D)];case 1:return n=o.sent(),t.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),t.active=!0,[2]}})})})},e.prototype.runLevel=function(){return a(this,void 0,void 0,function(){return c(this,function(){return this.bottomBtn.active=!0,this.curLevelUid=this.getLevelUid(),console.error("curLevelId:",this.curLevelUid),this._data.type==f.LevelModelType.MainLevel?this.createLevel():(this.curLevelUid=this._data.levelUid,this.createOtherLevel()),[2]})})},e.prototype.nextLevel=function(){return a(this,void 0,void 0,function(){return c(this,function(){return this.runLevel(),[2]})})},e.prototype.againLevel=function(){return a(this,void 0,void 0,function(){return c(this,function(){return this.runLevel(),[2]})})},e.prototype.update=function(t){this.runTime+=t,this.gmCd+=t,this.gmCd>3&&(this.gmCd=0,this.clickGmCnt=0)},e.prototype.createLevel=function(){var t=this;return new Promise(function(e){var n=function(e){t.content.removeAllChildren();var n=cc.instantiate(e);t.content.addChild(n),t.levelComp=n._components[0],t.isFirstReport=!1,t.report_Level_Page(),t.runTime=0,t.levelIdTxt.string="\u7b2c"+t.curLevelId+"\u5173",t.devId.string=t.curLevelUid.toString()};cc.assetManager.loadBundle("resBundle",function(o,i){i.load("prefab/mainLevel/zqddn_zhb_level"+t.curLevelUid,cc.Prefab,function(o,i){if(t.levelType==f.LevelModelType.MainLevel){var r=y.user.get("limitedRewardData"),a=0;r&&(a=r.slotItem),window.mainLevelData={slotItemNum:a,isOpenAddSpeed:t.curLevelId>=5,isAddSlot:!1}}n(i),e()})})})},e.prototype.success=function(){var t=this;this.levelType==f.LevelModelType.MainLevel?h.popup.show(f.PopupName.SUCCESS,{levelType:this.levelType,curLevelId:this.curLevelId,curLevelUid:this.curLevelUid,drawData:this.levelComp.func_getDrawData(),closeCb:function(){if(t.levelType==f.LevelModelType.MainLevel&&d.platform.is(f.PLATFORM.ZJTD_MINIGAME)){y.user.get("limitedRewardData")||y.user.set("limitedRewardData",{});var e=y.user.get("limitedRewardData");e.todayIsTip||e.isGet||(y.user.getTempData("isFirst")&&t.levelType==f.LevelModelType.MainLevel?t.curLevelId-1==2&&(h.popup.show(f.PopupName.GIFT),e.todayIsTip=!0):(h.popup.show(f.PopupName.GIFT),e.todayIsTip=!0),y.user.set("limitedRewardData",e))}}}):h.popup.show(f.PopupName.SUCCESS,{levelType:this.levelType}),d.platform.stopRecordCap()},e.prototype.getLevelUid=function(){if(this.levelType==f.LevelModelType.MainLevel){var t=Object.values(this.levelCfg).sort(function(t,e){return Number(t)-Number(e)});return console.error("levelCfg:",t),this.curLevelId>t.length?t[w.default.getRandomInt(2,t.length-1)]:t[this.curLevelId-1].uId}},e.prototype.fail=function(){var t=this;if(h.popup.hideAll(),this.levelType==f.LevelModelType.MainLevel){var e=function(e){e?(t.levelComp.func_hasLockParking()?t.report_reward_btn("revive1"):t.report_reward_btn("revive2"),t.levelComp.func_revive()):(t.report_Level_Lose(),h.popup.show(f.PopupName.FAIL,{drawData:t.levelComp.func_getDrawData(),progress:t.levelComp.func_getDrawProgress(),curLevelId:t.curLevelId}))};this.levelComp.func_hasLockParking()?h.popup.show(f.PopupName.REVIVE,{cb:e,icon:"icon_fuhuo1",desc:"\u590d\u6d3b\u5e76\u89e3\u9501\u4e00\u4e2a\u505c\u8f66\u4f4d\uff08\u540c\u65f6\u6e05\u7a7a\u6240\u6709\u8f66\u4f4d\uff09"}):h.popup.show(f.PopupName.REVIVE,{cb:e,icon:"icon_fuhuo2",desc:"\u590d\u6d3b\u5e76\u6e05\u7a7a\u6240\u6709\u6c7d\u8f66"})}else this.levelComp.func_revive?h.popup.show(f.PopupName.REVIVE,{cb:function(e){e?t.levelComp.func_revive():h.popup.show(f.PopupName.FAIL,{curLevelId:t.curLevelId})},icon:"icon_fuhuo1",desc:"\u590d\u6d3b"}):h.popup.show(f.PopupName.FAIL,{curLevelId:this.curLevelId})},e.prototype.clickPause=function(){l.audioMgr.playSound(f.SoundName.CLICK),h.popup.show(f.PopupName.SETTING,{isInLevel:!0})},e.prototype.clickReplay=function(){this.runLevel()},e.prototype.clickJumpLevelDevId=function(){l.audioMgr.playSound(f.SoundName.CLICK);var t=Number(this.editorJump.string);if(this.levelType==f.LevelModelType.MainLevel)for(var e=0,n=Object.values(this.levelCfg);e<n.length;e++){var o=n[e];if(o.uId==t){t=Number(o.id),this.curLevelUid=o.uId;break}}this.curLevelId=t,this.runLevel()},e.prototype.clickJumpLevelId=function(){l.audioMgr.playSound(f.SoundName.CLICK);var t=Number(this.editorJumpDev.string);this.levelType,f.LevelModelType.MainLevel,t=Number(t),this.curLevelId=t,this.runLevel()},e.prototype.clickJumpOtherLevelId=function(){l.audioMgr.playSound(f.SoundName.CLICK);var t=Number(this.editorJumpOther.string);t=Number(t),this.curLevelId=t,this.curLevelUid=t,this.createOtherLevel()},e.prototype.createOtherLevel=function(){var t=this;return new Promise(function(e){var n=function(e){t.content.removeAllChildren();var n=cc.instantiate(e);t.levelComp=n._components[0],t.content.addChild(n),t.isFirstReport=!1,t.report_Level_Page(),t.runTime=0,t.levelIdTxt.string="\u7b2c"+t.curLevelUid+"\u5173",t.devId.string=t.curLevelUid.toString()};console.error("curLevelUid:",t.curLevelUid),cc.assetManager.loadBundle("resBundle",function(o,i){i.load("prefab/otherLevel/zqddn_zhb_level"+t.curLevelUid,cc.Prefab,function(t,o){n(o),e()})})})},e.prototype.clickNoAdsHandle=function(){l.audioMgr.playSound(f.SoundName.CLICK),d.platform.showRewardAds=function(t){t(0)},d.platform.showInsert=function(t){return t&&t()},d.platform.showBanner=function(){},v.tips.show("\u5df2\u5f00\u542f\u65e0\u5e7f\u544a\u6a21\u5f0f")},e.prototype.clearDataHandle=function(){for(var t in l.audioMgr.playSound(f.SoundName.CLICK),y.user.data)y.user.set(t,y.user.defaultData[t]);v.tips.show("\u5df2\u6e05\u7a7a\u7528\u6237\u6570\u636e,\u8bf7\u91cd\u542f")},e.prototype.showAd=function(t){d.platform.showRewardAds(function(e){0==e?t&&t():-3==e?v.tips.show("\u6682\u65e0\u5e7f\u544a\uff0c\u656c\u8bf7\u671f\u5f85!"):-4==e&&v.tips.show("\u6682\u65e0\u5e7f\u544a\uff0c\u7a0d\u540e\u518d\u8bd5!")})},e.prototype.click_mainSort=function(){var t=this;this.showAd(function(){t.levelComp.func_sort(),t.report_reward_btn("arrange")})},e.prototype.click_mainRemove=function(){var t=this;this.showAd(function(){t.levelComp.func_remove(),t.report_reward_btn("delete")})},e.prototype.click_mainClear=function(){var t=this;this.showAd(function(){t.levelComp.func_clearSolt(),t.report_reward_btn("Remove")})},e.prototype.mainOpenSlot=function(t){var e=this;if(window.mainLevelData&&window.mainLevelData.slotItemNum>0){window.mainLevelData.slotItemNum--;var n=y.user.get("limitedRewardData");return n.slotItem=window.mainLevelData.slotItemNum,y.user.set("limitedRewardData",n),void(t&&t())}this.showAd(function(){t&&t(),e.report_reward_btn("addone")})},e.prototype.report_reward_btn=function(t){var e=0,n=0;switch(this.levelType){case f.LevelModelType.MainLevel:e=0,n=Math.floor(100*this.levelComp.func_getDrawProgress())}m.report.reportTree("reward_btn",{scene:t,lv:Number(y.user.get(this.levelType).curLevelId),devid:this.curLevelUid,progress:n,mode:e}),this.report_First_progress(2)},e.prototype.report_Level_Page=function(){switch(this.levelType){case f.LevelModelType.MainLevel:}},e.prototype.report_Level_Win=function(){switch(this.levelType){case f.LevelModelType.MainLevel:}},e.prototype.report_Level_Lose=function(){switch(this.levelType){case f.LevelModelType.MainLevel:Math.floor(100*this.levelComp.func_getDrawProgress())}},e.prototype.report_Level_Return=function(){switch(this.levelType){case f.LevelModelType.MainLevel:Math.floor(100*this.levelComp.func_getDrawProgress())}},e.prototype.report_First_progress=function(){if(!this.isFirstReport)switch(this.isFirstReport=!0,this.levelType){case f.LevelModelType.MainLevel:Math.floor(100*this.levelComp.func_getDrawProgress())}},r([b(cc.EditBox)],e.prototype,"editorJump",void 0),r([b(cc.EditBox)],e.prototype,"editorJumpDev",void 0),r([b(cc.EditBox)],e.prototype,"editorJumpOther",void 0),r([b(cc.Node)],e.prototype,"bottomBtn",void 0),r([b(cc.Node)],e.prototype,"buttonTemp",void 0),r([b(cc.Label)],e.prototype,"levelIdTxt",void 0),r([b(cc.Label)],e.prototype,"devId",void 0),r([b(cc.Node)],e.prototype,"gm",void 0),r([b(cc.Label)],e.prototype,"version",void 0),r([_],e)}(cc.Component);n.default=k,cc._RF.pop()},{"../../framework/AssetManager":void 0,"../../framework/AudioMgr":void 0,"../../framework/Bms":void 0,"../../framework/Config":void 0,"../../framework/Constant":void 0,"../../framework/Platform":void 0,"../../framework/Popup":void 0,"../../framework/Report":void 0,"../../framework/Tips":void 0,"../../framework/User":void 0,"../../zqddn_zhb/script/common/LevelUtils":void 0}],Main:[function(t,e,n){"use strict";cc._RF.push(e,"ad13944dYVN3KGdmMCq6x1D","Main");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framework/AudioMgr"),c=t("../../framework/Constant"),s=t("../../framework/Platform"),l=t("../../framework/Popup"),u=t("../../framework/User"),p=cc._decorator,f=p.ccclass,d=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.notice=null,e.btnGift=null,e.btnStart=null,e.btnRank=null,e.btnSetting=null,e.btnCollect=null,e.btnActivity=null,e.btnJump=null,e}return i(e,t),e.prototype.onEnable=function(){this.initNodes(),this.initEvents(),this.initData(),this.initView()},e.prototype.onDisable=function(){},e.prototype.initNodes=function(){this.notice=cc.find("Notice/Mask/NoticeDes",this.node),this.scrollView=cc.find("List",this.node),this.btnStart=cc.find("Start",this.node),this.btnRank=cc.find("Rank",this.node),this.btnSetting=cc.find("Setting",this.node),this.btnGift=cc.find("Gift",this.node),this.btnCollect=cc.find("Collect",this.node),this.btnActivity=cc.find("Activity",this.node),this.btnJump=cc.find("LevelJump/MainJump",this.node)},e.prototype.initEvents=function(){cc.game.on(c.EventName.REFRESH_MAIN_VIEW,this.refreshView,this),this.btnStart.on(cc.Node.EventType.TOUCH_END,this.clickStart,this),this.btnRank.on(cc.Node.EventType.TOUCH_END,this.clickRank,this),this.btnSetting.on(cc.Node.EventType.TOUCH_END,this.clickSetting,this),this.btnGift.on(cc.Node.EventType.TOUCH_END,this.clickGift,this),this.btnCollect.on(cc.Node.EventType.TOUCH_END,this.clickCollect,this),this.btnActivity.on(cc.Node.EventType.TOUCH_END,this.clickActivity,this)},e.prototype.initData=function(){},e.prototype.initView=function(){this.btnGift.active=s.platform.is(c.PLATFORM.ZJTD_MINIGAME)&&["Douyin"].some(function(t){return t==s.platform.getInstance().getSystemInfoSync().appName}),this.btnRank.active=s.platform.is(c.PLATFORM.ZJTD_MINIGAME),this.refreshView()},e.prototype.refreshView=function(){var t=u.user.get("limitedRewardData");this.btnGift.active=s.platform.is(c.PLATFORM.ZJTD_MINIGAME)&&["Douyin"].some(function(t){return t==s.platform.getInstance().getSystemInfoSync().appName})&&(!t||!t.isGet)},e.prototype.clickStart=function(){a.audioMgr.playSound(c.SoundName.CLICK),cc.game.emit(c.EventName.SHOW_LEVEL,{type:c.LevelModelType.MainLevel})},e.prototype.clickLocation=function(){a.audioMgr.playSound(c.SoundName.CLICK),cc.game.emit(c.EventName.JUMP_TO_MYCITY)},e.prototype.clickRank=function(){a.audioMgr.playSound(c.SoundName.CLICK),s.platform.is(c.PLATFORM.ZJTD_MINIGAME)&&s.platform.getInstance().getImRankList&&s.platform.getInstance().getImRankList({relationType:"default",dataType:0,rankType:"month",suffix:"\u5173",rankTitle:"\u6392\u884c\u699c",zoneId:"default",success:function(t){window.Logger.info("## \u6392\u884c\u699c\u4fe1\u606f",t)},fail:function(){}})},e.prototype.clickSetting=function(){a.audioMgr.playSound(c.SoundName.CLICK),l.popup.show(c.PopupName.SETTING)},e.prototype.clickGift=function(){a.audioMgr.playSound(c.SoundName.CLICK),l.popup.show(c.PopupName.GIFT)},e.prototype.clickCollect=function(){a.audioMgr.playSound(c.SoundName.CLICK),l.popup.show(c.PopupName.Collect)},e.prototype.clickActivity=function(){a.audioMgr.playSound(c.SoundName.CLICK),l.popup.show(c.PopupName.ACTIVITY)},r([f],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../../framework/AudioMgr":void 0,"../../framework/Constant":void 0,"../../framework/Platform":void 0,"../../framework/Popup":void 0,"../../framework/User":void 0}],Revive:[function(t,e,n){"use strict";cc._RF.push(e,"f2ded5AEFxHVIDo1XR9TB+R","Revive");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framework/AudioMgr"),c=t("../../framework/Constant"),s=t("../../framework/Platform"),l=t("../../framework/Popup"),u=t("../../framework/Tips"),p=cc._decorator,f=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.desc=null,e.icon=null,e.mask=null,e.content=null,e.btnCancel=null,e.btnRevive=null,e._data=null,e}return i(e,t),e.prototype.onEnable=function(){this.initNodes(),this.initEvents(),this.initView(),this.mask.opacity=0,cc.tween(this.mask).to(.25,{opacity:200}).start(),this.content.scale=0,cc.tween(this.content).to(.3,{scale:1},{easing:"backOut"}).start()},e.prototype.onDisable=function(){this.clearEvents(),this.clearNodes()},e.prototype.initNodes=function(){this.mask=cc.find("Mask",this.node),this.content=cc.find("Content",this.node),this.btnCancel=cc.find("Cancel",this.content),this.btnRevive=cc.find("Revive",this.content)},e.prototype.initView=function(){var t=this;this._data&&this._data.desc&&(this.desc.string=this._data.desc),this._data&&this._data.icon&&cc.assetManager.loadBundle("resBundle",function(e,n){e||n.load("texture/icon/"+t._data.icon,function(e,n){!e&&cc.isValid(t.node)&&(t.icon.spriteFrame=new cc.SpriteFrame(n))})})},e.prototype.clearNodes=function(){this.mask=null,this.content=null,this.btnCancel=null,this.btnRevive=null},e.prototype.initEvents=function(){this.btnCancel.on(cc.Node.EventType.TOUCH_END,this.clickCancelHandle,this),this.btnRevive.on(cc.Node.EventType.TOUCH_END,this.clickReviveHandle,this)},e.prototype.clearEvents=function(){this.btnCancel.off(cc.Node.EventType.TOUCH_END,this.clickCancelHandle,this),this.btnRevive.off(cc.Node.EventType.TOUCH_END,this.clickReviveHandle,this)},e.prototype.clickReviveHandle=function(){var t=this;a.audioMgr.playSound(c.SoundName.CLICK),s.platform.showRewardAds(function(e){0==e?(t._data&&t._data.cb&&t._data.cb(!0),l.popup.hide()):-3==e?u.tips.show("\u6682\u65e0\u5e7f\u544a\uff0c\u656c\u8bf7\u671f\u5f85!"):-4==e&&u.tips.show("\u6682\u65e0\u5e7f\u544a\uff0c\u7a0d\u540e\u518d\u8bd5!")})},e.prototype.clickCancelHandle=function(){a.audioMgr.playSound(c.SoundName.CLICK),this._data&&this._data.cb&&this._data.cb(!1),l.popup.hide()},r([d(cc.Label)],e.prototype,"desc",void 0),r([d(cc.Sprite)],e.prototype,"icon",void 0),r([f],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../framework/AudioMgr":void 0,"../../framework/Constant":void 0,"../../framework/Platform":void 0,"../../framework/Popup":void 0,"../../framework/Tips":void 0}],Setting:[function(t,e,n){"use strict";cc._RF.push(e,"1778eIwcOlJV5OITKtN/Yxa","Setting");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../framework/AudioMgr"),c=t("../../framework/Bms"),s=t("../../framework/Constant"),l=t("../../framework/Platform"),u=t("../../framework/Popup"),p=t("../../framework/User"),f=cc._decorator,d=f.ccclass,h=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.content=null,e.musicContent=null,e.vibrationContent=null,e.soundContent=null,e.returnMain=null,e._data=null,e}return i(e,t),e.prototype.onEnable=function(){this.initNodes(),this.initEvents(),this.initView(),this.mask.opacity=0,cc.tween(this.mask).to(.25,{opacity:200}).start(),this.content.scale=0,cc.tween(this.content).to(.3,{scale:1},{easing:"backOut"}).start(),c.bms.checkKey("isbanner")&&l.platform.showBanner({node:cc.find("Other/Node Banner")})},e.prototype.isInLevel=function(){return this._data&&this._data.isInLevel},e.prototype.onDisable=function(){l.platform.hideBanner()},e.prototype.initNodes=function(){this.mask=cc.find("Mask",this.node),this.content=cc.find("Content",this.node),this.musicContent=cc.find("Music",this.content),this.soundContent=cc.find("Sound",this.content),this.vibrationContent=cc.find("Vibration",this.content),this.returnMain=cc.find("returnMain",this.content),this.replay=cc.find("replay",this.content),this.continue=cc.find("continue",this.content),this.replay.active=this.isInLevel(),this.continue.active=this.isInLevel(),this.returnMain.x=this.isInLevel()?this.returnMain.x:0},e.prototype.initEvents=function(){this.musicContent.on(cc.Node.EventType.TOUCH_END,this.clickMusicHandle,this),this.soundContent.on(cc.Node.EventType.TOUCH_END,this.clickSoundHandle,this),this.vibrationContent.on(cc.Node.EventType.TOUCH_END,this.clickVibrateHandle,this),this.returnMain.on(cc.Node.EventType.TOUCH_END,this.clickRetrunMain,this),this.replay.on(cc.Node.EventType.TOUCH_END,this.clickReplay,this),this.continue.on(cc.Node.EventType.TOUCH_END,this.clickContinue,this)},e.prototype.initView=function(){var t=p.user.get("setting");this.switchUseStatus(this.musicContent,t.music),this.switchUseStatus(this.soundContent,t.sound),this.switchUseStatus(this.vibrationContent,t.vibrate)},e.prototype.clickMusicHandle=function(){a.audioMgr.playSound(s.SoundName.CLICK);var t=p.user.get("setting");t.music=!t.music,p.user.set("setting",t),this.switchUseStatus(this.musicContent,t.music),a.audioMgr.setBgmMute(!t.music)},e.prototype.clickSoundHandle=function(){a.audioMgr.playSound(s.SoundName.CLICK);var t=p.user.get("setting");t.sound=!t.sound,p.user.set("setting",t),this.switchUseStatus(this.soundContent,t.sound),a.audioMgr.setSoundMute(!t.sound)},e.prototype.switchUseStatus=function(t,e){t.getChildByName("ON").active=e,t.getChildByName("OFF").active=!e},e.prototype.clickVibrateHandle=function(t){a.audioMgr.playSound(s.SoundName.CLICK);var e=t.target,n=p.user.get("setting");n.vibrate=!n.vibrate,p.user.set("setting",n),this.switchUseStatus(e,n.vibrate),n.vibrate&&(l.platform.is(s.PLATFORM.ANDROID_GOOGLE)?l.platform.vibrate():l.platform.vibrateShort())},e.prototype.clickRetrunMain=function(){a.audioMgr.playSound(s.SoundName.CLICK),this.isInLevel()&&(cc.game.emit(s.EventName.REPORT_LEVEL_RETURN),cc.game.emit(s.EventName.SHOW_MAIN)),u.popup.hide()},e.prototype.clickReplay=function(){a.audioMgr.playSound(s.SoundName.CLICK),cc.game.emit(s.EventName.GAME_REPLAY),u.popup.hide()},e.prototype.clickContinue=function(){a.audioMgr.playSound(s.SoundName.CLICK),u.popup.hide()},r([d],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../../framework/AudioMgr":void 0,"../../framework/Bms":void 0,"../../framework/Constant":void 0,"../../framework/Platform":void 0,"../../framework/Popup":void 0,"../../framework/User":void 0}],Success:[function(t,e,n){"use strict";cc._RF.push(e,"f587959dXJIwIaiyuzroZf9","Success");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,c)}s((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../framework/AssetManager"),l=t("../../framework/AudioMgr"),u=t("../../framework/Bms"),p=t("../../framework/Constant"),f=t("../../framework/Platform"),d=t("../../framework/Popup"),h=t("../../framework/UIBase"),m=t("../../framework/User"),v=cc._decorator,y=v.ccclass,w=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.content=null,e.picture=null,e.pictureBorder=null,e.pictureMask=null,e.btnHome=null,e.btnShare=null,e.btnNext=null,e._data=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initEvents(),this.initView(),this.showContentAnim()},e.prototype.onDisable=function(){if(this._data&&this._data.drawData){var t=this._data.drawData.frame;t&&(cc.assetManager.releaseAsset(t._texture),cc.assetManager.releaseAsset(t))}},e.prototype.initEvents=function(){this.bindTouchEndEvents(this.btnHome,this.clickHomeHandle),this.bindTouchEndEvents(this.btnNext,this.clickNextHandle),this.bindTouchEndEvents(this.btnShare,this.clickShareHandle)},e.prototype.initView=function(){return a(this,void 0,Promise,function(){var t;return c(this,function(e){switch(e.label){case 0:return this.checkInsertHandle(null),this._data.levelType!=p.LevelModelType.MainLevel?[3,2]:[4,s.default.getRes("resBundle","texture/collect/"+this._data.curLevelUid,cc.Texture2D)];case 1:return t=e.sent(),this.picture.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.btnShare.active=f.platform.is(p.PLATFORM.ZJTD_MINIGAME,p.PLATFORM.KS_MINIGAME),[3,3];case 2:this.btnNext.active=!1,this.btnShare.active=!1,e.label=3;case 3:return[2]}})})},e.prototype.showContentAnim=function(){return new Promise(function(t){t()})},e.prototype.hideContentAnim=function(){return new Promise(function(t){t()})},e.prototype.clickHomeHandle=function(){return a(this,void 0,void 0,function(){return c(this,function(){return l.audioMgr.playSound(p.SoundName.CLICK),d.popup.hide(),this._data.closeCb&&this._data.closeCb(),cc.game.emit(p.EventName.SHOW_MAIN),[2]})})},e.prototype.clickShareHandle=function(){return a(this,void 0,void 0,function(){return c(this,function(){return l.audioMgr.playSound(p.SoundName.CLICK),f.platform.shareRecordCap(function(){}),[2]})})},e.prototype.clickNextHandle=function(){l.audioMgr.playSound(p.SoundName.CLICK),d.popup.hide(),this._data.closeCb&&this._data.closeCb(),cc.game.emit(p.EventName.GAME_NEXT)},e.prototype.checkInsertHandle=function(t){if(f.platform.not(p.PLATFORM.ZJTD_MINIGAME))return t&&t();var e=Number(this._data.curLevelId)-1,n=[u.bms.getKey("startWinFullScreenAd"),u.bms.getKey("spaceWinFullScreenAd")];if(u.bms.checkKey("fullScreenAd")){var o=Math.floor((new Date).getTime()/1e3),i=m.user.getTempData("lastInsertTime")||m.user.getTempData("startTime");if(Math.floor((new Date).getTime()/1e3)-i>=u.bms.getKey("FullScreenAdCD")&&0!=n[0]&&0!=n[1]&&(e==n[0]||e>=n[0]&&e%n[1]==0))return m.user.setTempData("lastInsertTime",o),void f.platform.showInsert(function(){t&&t()})}return t&&t()},r([y],e)}(h.default));n.default=w,cc._RF.pop()},{"../../framework/AssetManager":void 0,"../../framework/AudioMgr":void 0,"../../framework/Bms":void 0,"../../framework/Constant":void 0,"../../framework/Platform":void 0,"../../framework/Popup":void 0,"../../framework/UIBase":void 0,"../../framework/User":void 0}]},{},["Activity","Collect","CollectItem","Fail","Game","Gift","Level","Main","Revive","Setting","Success"]);